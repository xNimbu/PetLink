<!-- <p>profile works!</p> -->
<div class="profile-page position-relative vh-100 bg-white">
  <div class="position-absolute top-0 start-0 w-100 h-100" style="z-index: 0; background-image: radial-gradient(125% 125% at 50% 90%, #ffffff 40%, #10b981 100%); background-size: 100% 100%;"></div>
  @if (user) {
  <!-- overlay -->
  <div class="position-absolute top-0 start-0 w-100 h-100 bg-dark bg-opacity-50" style="z-index: 1;"></div>

  <div class="container py-4 position-relative" style="z-index: 2;">
    <div class="card mx-custom shadow-lg p-4 rounded-4 bg-white bg-opacity-75 mt-5">

      <!-- CABECERA -->
      <div class="d-flex flex-column flex-md-row justify-content-between align-items-start mb-4">

        <!-- Avatar + datos -->
        <div class="d-flex align-items-start flex-grow-1">
          <img [src]="user.photoURL" class="rounded-circle me-3"
            style="width: 110px; height:110px; object-fit: cover;" />

          <div class="profile-info">
            <h5 class="mb-1 text-uppercase fw-bold">{{ user.fullName }}</h5>
            <p class="text-muted mb-3">{{ '@' + user.username }}</p>

            <ul class="list-unstyled small mb-0">
              <li class="mb-1">
                <span class="fw-bold">Nombre completo</span><br />
                {{ user.fullName }}
              </li>
              <li class="mb-1">
                <span class="fw-bold">Correo electrónico</span><br />
                {{ user.email }}
              </li>
              <li class="mb-1">
                <span class="fw-bold">Teléfono</span><br />
                {{ user.phone || '-' }}
              </li>
            </ul>
          </div>
        </div>

        <!-- Botones -->
        <div class="ms-md-4 mt-3 mt-md-0 d-flex flex-row gap-2">
          <button class="btn btn-success" (click)="openEditProfileModal()">Editar perfil</button>
          <button class="btn btn-danger" (click)="logout()">Cerrar Sesión</button>
        </div>
      </div>

      <!-- MASCOTAS -->
      <h5 class="text-center mb-3">Mascotas</h5>

      <div class="d-flex justify-content-end mb-3">
        <button class="btn btn-outline-success" (click)="openAddPetModal()">
          <i class="bi bi-plus-circle me-2"></i> Agregar Mascota
        </button>
      </div>

      @for (pet of pets; track $index) {

      <div class="card mb-3 p-3 rounded-4 position-relative">
        <div class="d-flex align-items-center">
          <img [src]="pet.photoURL" class="rounded-circle me-3"
            style="width: 60px; height:60px; object-fit: cover;" />
          <div class="w-100">
            <div class="row">
              <div class="col-6 col-md-3 mb-2">
                <strong>Nombre Mascota:</strong><br />{{ pet.name }}
              </div>
              <div class="col-6 col-md-3 mb-2">
                <strong>Raza:</strong><br />{{ pet.breed }}
              </div>
              <div class="col-6 col-md-3 mb-2">
                <strong>Edad:</strong><br />{{ pet.age }} años
              </div>
              <div class="col-6 col-md-3 mb-2">
                <strong>Tipo:</strong><br />{{ pet.type }}
              </div>
            </div>
          </div>

          <!-- Menú de opciones -->
          <div class="dropdown position-absolute top-0 end-0 m-2">
            <button class="btn btn-light btn-sm" data-bs-toggle="dropdown">
              <i class="bi bi-three-dots-vertical"></i>
            </button>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" (click)="openEditPetModal(pet)">Editar</a></li>
              <li><a class="dropdown-item text-danger" (click)="deletePet(pet.id)">Eliminar</a></li>
            </ul>
          </div>
        </div>
      </div>
      }

    </div>
  </div>
  }
</div>