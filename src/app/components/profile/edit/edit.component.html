<!-- <p>edit works!</p> -->
<div class="modal-header">
  <h5 class="modal-title">Editar perfil</h5>
  <button type="button" class="btn-close" aria-label="Cerrar" (click)="cancel()"></button>
</div>

<div class="modal-body">

  <!-- FOTO DE PERFIL (nueva sección) -->
  <div class="mb-4 text-center">
    <!-- Imagen actual o pre-visualización -->
    <img [src]="previewUrl || userData?.photoURL" class="rounded-circle mb-2"
         style="width: 110px; height:110px; object-fit: cover;" />

    <!-- Botón para seleccionar archivo -->
    <div>
      <input type="file" accept="image/*" #file hidden (change)="onFileSelected($event)">
      <button type="button" class="btn btn-outline-primary btn-sm" (click)="file.click()">
        Cambiar foto
      </button>
    </div>
  </div>

  <!-- Campos no editables -->
  <div class="mb-3">
    <label class="form-label">Usuario</label>
    <input type="text" class="form-control" [value]="userData?.username" disabled>
  </div>

  <!-- Formulario editable -->
  <form [formGroup]="form">
    <div class="mb-3">
      <label class="form-label">Nombre completo</label>
      <input type="text" class="form-control" formControlName="fullName">
    </div>
    <div class="mb-3">
      <label class="form-label">Correo</label>
      <input type="email" class="form-control" formControlName="email">
    </div>
    <div class="mb-3">
      <label class="form-label">Teléfono</label>
      <input type="text" class="form-control" formControlName="phone">
    </div>
  </form>
</div>

<div class="modal-footer">
  <button class="btn btn-secondary" (click)="cancel()">Cancelar</button>
  <button class="btn btn-primary" (click)="save()" [disabled]="form.invalid || uploading">
    {{ uploading ? 'Subiendo…' : 'Guardar' }}
  </button>
</div>
