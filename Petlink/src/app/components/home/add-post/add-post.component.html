<!-- src/app/components/home/add-post/add-post.component.html -->

<div class="new-post-card my-3 w-100">
  <h5 class="new-post-card__title">
    {{ showForm ? "Crear publicación" : "Nueva publicación" }}
  </h5>
  <hr class="new-post-card__divider" />

  <!-- Estado inicial -->
  <ng-container *ngIf="!showForm">
    <div class="new-post-card__body text-center">
      <!-- Botón verde “Crear nuevo post” -->
      <button class="btn new-post-card__action" (click)="openForm()">
        Crear nuevo post
      </button>
    </div>
  </ng-container>

  <!-- Formulario abierto -->
  <ng-container *ngIf="showForm">
    <div class="new-post-card__form p-3 border rounded">
      <!-- Textarea para contenido -->
      <textarea
        class="form-control mb-2"
        rows="4"
        placeholder="¿Qué estás pensando?"
        [(ngModel)]="postContent"
      ></textarea>

      <!-- Selector de fichero -->
      <input
        type="file"
        class="form-control mb-2"
        accept="image/*"
        (change)="onFileSelected($event)"
      />

      <!-- Botones -->
      <div class="d-flex justify-content-end gap-2">
        <button class="btn btn-secondary" (click)="cancel()">Cancelar</button>
        <button
          class="btn new-post-card__publish"
          [disabled]="!postContent.trim() && !selectedFile"
          (click)="submitPost()"
        >
          Publicar
        </button>
      </div>
    </div>
  </ng-container>
</div>